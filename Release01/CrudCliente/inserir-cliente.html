<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[RFS01] Inserir Cliente</title>
    <style>
        :root {
            --primary-color: #28a745; /* Verde para sucesso/cadastro */
            --danger-color: #dc3545;
            --light-bg: #f8f9fa;
            --white: #ffffff;
        }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 20px; background-color: var(--light-bg); }
        .card { max-width: 900px; margin: auto; padding: 25px; background: var(--white); border-radius: 8px; box-shadow: 0 0 15px rgba(0, 0, 0, 0.05); }
        legend h1 { margin: 0 0 15px 0; font-size: 1.8em; color: var(--primary-color); border-bottom: 2px solid #e9ecef; padding-bottom: 10px; }

        form { padding: 0; }
        .row { display: flex; gap: 20px; flex-wrap: wrap; }
        .col { flex: 1 1 200px; }
        label { 
            display: block; 
            margin-top: 15px; 
            font-weight: 600; 
            font-size: 0.95em; 
            color: #343a40; 
        }
        label[for*="*"]::after { /* Destaca campos obrigatórios */
            content: '*';
            color: var(--danger-color);
            margin-left: 3px;
        }
        input, select { 
            width: 100%; 
            padding: 10px; 
            margin-top: 5px; 
            box-sizing: border-box; 
            border: 1px solid #ced4da;
            border-radius: 4px;
        }
        small { color: #6c757d; font-size: 0.75em; display: block; margin-top: 4px; }

        button { 
            margin-top: 25px; 
            padding: 12px 20px; 
            cursor: pointer;
            border: none;
            border-radius: 5px;
            font-weight: 600;
            transition: background-color 0.2s;
        }
        button[type="submit"] { background-color: var(--primary-color); color: var(--white); }
        button[type="submit"]:hover { background-color: #1e7e34; }
        button[type="reset"] { background-color: #6c757d; color: var(--white); margin-left: 10px; }
        button[type="reset"]:hover { background-color: #5a6268; }
    </style>
</head>
<body>

<form action="#" method="post" id="formCadastroCliente">
    <fieldset>
        <legend><h1>[RFS01] Inserir Cliente</h1></legend>
        <p>Cadastro de novo cliente no sistema. O CPF deve ser válido (11 dígitos) e único.</p>

        <div class="row">
            <div class="col">
                <label for="cpf">*CPF</label>
                <input type="text" id="cpf" name="cpf" required maxlength="14" placeholder="000.000.000-00">
                <small>Formato ###.###.###-##. Deve ser único.</small>
            </div>

            <div class="col">
                <label for="nome_completo">*Nome completo</label>
                <input type="text" id="nome_completo" name="nome_completo" required maxlength="100" placeholder="Nome e sobrenome">
            </div>
        </div>

        <div class="row">
            <div class="col">
                <label for="data_nasc">*Data de nascimento</label>
                <input type="date" id="data_nasc" name="data_nasc" required>
                <small>Formato dd/mm/aaaa.</small>
            </div>

            <div class="col">
                <label for="telefone">*Telefone</label>
                <input type="text" id="telefone" name="telefone" required maxlength="20" placeholder="(DD) 000-000">
                <small>Campo de telefone com DDD.</small>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <label for="bairro">Bairro</label>
                <input type="text" id="bairro" name="bairro" placeholder="Bairro">
            </div>

            <div class="col">
                <label for="rua">Rua</label>
                <input type="text" id="rua" name="rua" placeholder="Rua / Avenida">
            </div>

            <div class="col">
                <label for="numero">Número</label>
                <input type="text" id="numero" name="numero" placeholder="123">
            </div>
        </div>

        <div class="row">
            <div class="col">
                <label for="cep">CEP</label>
                <input type="text" id="cep" name="cep" maxlength="9" placeholder="00000-000">
            </div>

            <div class="col">
                <label for="status">*Status</label>
                <select id="status" name="status" required>
                    <option>Ativo</option>
                    <option>Inativo</option>
                </select>
            </div>

            <div class="col">
                <label for="data_cadastro">*Data de cadastro</label>
                <input type="text" id="data_cadastro" name="data_cadastro" readonly>
                <small>Somente leitura.</small>
            </div>
        </div>

        <button type="submit">Salvar Cliente</button>
        <button type="reset">Limpar</button>
    </fieldset>
</form>

<script>
    // máscara CPF
    const cpfInput = document.getElementById("cpf");
    cpfInput.addEventListener("input", function() {
        let v = cpfInput.value.replace(/\D/g, "").slice(0,11);
        if (v.length > 9) v = v.replace(/(\d{3})(\d{3})(\d{3})(\d{0,2})/, "$1.$2.$3-$4");
        else if (v.length > 6) v = v.replace(/(\d{3})(\d{3})(\d{0,3})/, "$1.$2.$3");
        else if (v.length > 3) v = v.replace(/(\d{3})(\d{0,3})/, "$1.$2");
        cpfInput.value = v;
    });

    // máscara telefone simples (DD) xxx-xxx
    const telInput = document.getElementById("telefone");
    telInput.addEventListener("input", function() {
        let v = telInput.value.replace(/\D/g,"").slice(0,9);
        if (v.length > 2) v = "(" + v.slice(0,2) + ") " + v.slice(2);
        if (v.length > 7) {
            const ddd = v.slice(1,3);
            const rest = v.replace(/^\(\d{2}\)\s?/, '');
            if (rest.length > 3) {
                telInput.value = "(" + ddd + ") " + rest.slice(0,3) + "-" + rest.slice(3,6);
            } else {
                telInput.value = "(" + ddd + ") " + rest;
            }
        } else {
            telInput.value = v;
        }
    });

    // máscara CEP 00000-000
    const cepInput = document.getElementById("cep");
    cepInput.addEventListener("input", function() {
        let v = cepInput.value.replace(/\D/g,"").slice(0,8);
        if (v.length > 5) v = v.replace(/(\d{5})(\d{0,3})/,"$1-$2");
        cepInput.value = v;
    });

    // preencher data cadastro
    const hoje = new Date();
    const dd = String(hoje.getDate()).padStart(2,'0');
    const mm = String(hoje.getMonth()+1).padStart(2,'0');
    const yyyy = hoje.getFullYear();
    document.getElementById("data_cadastro").value = dd + "/" + mm + "/" + yyyy;

    // validação final de cpf antes de enviar
    document.getElementById("formCadastroCliente").addEventListener("submit", function(e){
        const rawCPF = cpfInput.value.replace(/\D/g,"");
        if (rawCPF.length !== 11) {
            alert("CPF inválido. Deve ter 11 dígitos.");
            e.preventDefault();
        }
        // backend deve checar unicidade de CPF
    });
</script>

</body>
</html>
