<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[RFS09] Inserir Item de Estoque</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 2em; }
        form { max-width: 700px; margin: auto; padding: 1em; border: 1px solid #ccc; border-radius: 1em; }
        fieldset { border: none; padding: 0; }
        legend h1 { margin: 0 0 .5em 0; font-size: 1.2em; }
        label { display: block; margin-top: 1em; font-weight: 600; }
        input, select { width: 100%; padding: .5em; margin-top: .5em; box-sizing: border-box; }
        small { color: #555; font-size: .8em; font-weight: normal; }
        .row { display: flex; gap: 1em; flex-wrap: wrap; }
        .col { flex: 1 1 200px; }
        button { margin-top: 1.5em; padding: .7em 1.2em; cursor: pointer; }
    </style>
</head>
<body>
    <form action="#" method="post" id="formCadastroItem">
        <fieldset>
            <legend><h1>[RFS09] Inserir Item de Estoque</h1></legend>
            <p>Cadastro de novo item controlado em estoque. Validar unicidade do código interno.</p>

            <div class="row">
                <div class="col">
                    <label for="codigo_interno">*Código interno</label>
                    <input type="text" id="codigo_interno" name="codigo_interno" required maxlength="30" placeholder="Ex: 400-XYZ">
                    <small>Campo de texto único no sistema.</small>
                </div>

                <div class="col">
                    <label for="descricao">*Descrição / Nome do produto</label>
                    <input type="text" id="descricao" name="descricao" required maxlength="150" placeholder="Ex: Tomate Italiano 1kg">
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <label for="categoria">*Categoria</label>
                    <select id="categoria" name="categoria" required>
                        <option value="">Selecione...</option>
                        <option>Hortifruti</option>
                        <option>Frios</option>
                        <option>Limpeza</option>
                        <option>Bebidas</option>
                        <option>Outros</option>
                    </select>
                </div>

                <div class="col">
                    <label for="unidade">*Unidade de medida</label>
                    <select id="unidade" name="unidade" required>
                        <option value="">Selecione...</option>
                        <option>KG</option>
                        <option>L</option>
                        <option>ml</option>
                        <option>UN</option>
                    </select>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <label for="lote">Controle por Lote</label>
                    <select id="lote" name="lote">
                        <option>Não</option>
                        <option>Sim</option>
                    </select>
                </div>

                <div class="col">
                    <label for="validade">*Controle por Validade</label>
                    <select id="validade" name="validade" required>
                        <option>Não</option>
                        <option>Sim</option>
                    </select>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <label for="estoque">*Estoque</label>
                    <input type="number" id="estoque" name="estoque" min="0.01" step="0.01" required placeholder="Ex: 10.00">
                    <small>Quantidade atual (&gt; 0).</small>
                </div>

                <div class="col">
                    <label for="localizacao">*Localização</label>
                    <input type="text" id="localizacao" name="localizacao" required placeholder="Depósito / Rua / Prateleira">
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <label for="status">*Status</label>
                    <select id="status" name="status" required>
                        <option>Ativo</option>
                        <option>Inativo</option>
                    </select>
                </div>

                <div class="col">
                    <label for="data_cadastro">*Data de cadastro</label>
                    <input type="text" id="data_cadastro" name="data_cadastro" readonly>
                    <small>Somente leitura.</small>
                </div>
            </div>

            <button type="submit">Salvar Item</button>
            <button type="reset">Limpar</button>
        </fieldset>
    </form>

    <script>
        // preencher data atual
        const data = new Date();
        const dd = String(data.getDate()).padStart(2,'0');
        const mm = String(data.getMonth()+1).padStart(2,'0');
        const yyyy = data.getFullYear();
        document.getElementById('data_cadastro').value = dd + "/" + mm + "/" + yyyy;

        // valida estoque > 0
        document.getElementById('formCadastroItem').addEventListener('submit', function(e){
            const v = parseFloat(document.getElementById('estoque').value.replace(',','.'));
            if (isNaN(v) || v <= 0) {
                alert("Estoque deve ser maior que 0.");
                e.preventDefault();
            }
            // aqui seu backend validaria se código interno já existe
        });
    </script>
</body>
</html>
